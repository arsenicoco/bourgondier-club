<section class="mt-8">
    <div
        class="bg-gradient-to-r from-white-20 to-pink-50 dark:from-black-20 dark:to-gray-700 rounded-lg p-8 text-center"
    >
        <img
            src="/cta.webp"
            alt="Call to action image"
            class="mx-auto mb-6 max-w-md w-full h-auto rounded-lg"
        />
        <p
            class="text-md leading-relaxed text-gray-700 dark:text-gray-300 max-w-3xl mx-auto mb-8"
        >
            –ù–∞—à–∏ –≤—Å—Ç—Ä–µ—á–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –∫–∞–∂–¥—É—é <b>–ø—è—Ç–Ω–∏—Ü—É</b> –≤ —Ü–µ–Ω—Ç—Ä–µ –ê–º—Å—Ç–µ—Ä–¥–∞–º–∞, —Å <b
                >18:30 –¥–æ 20:00</b
            >. –ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º 5-7 –≤–∏–Ω, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–¥ —Ç–µ–º–∞—Ç–∏–∫—É
            –≤–µ—á–µ—Ä–∞. –ö–∞–∂–¥–∞—è –≤—Å—Ç—Ä–µ—á–∞ –ø—Ä–∏–Ω–µ—Å–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è, –æ–±—â–µ–Ω–∏–µ –∏ –Ω–æ–≤—ã–µ
            –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è —á–ª–µ–Ω–æ–≤ –∫–ª—É–±–∞ - ‚Ç¨69/–º–µ—Å—è—Ü (4
            –≤—Å—Ç—Ä–µ—á–∏). –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–æ–ø–∞—Å—Ç—å –Ω–∞ –æ–¥–Ω—É –≤—Å—Ç—Ä–µ—á—É –∑–∞ ‚Ç¨25. –ù—É –∏
            –∫–æ–Ω–µ—á–Ω–æ –∂–µ, —á–∞—Å—Ç—å –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ ‚Äì —á–∞—Ç –¥–ª—è –≤–∏–Ω–Ω–æ–≥–æ —Ç—Ä—ã–Ω–¥–µ–∂–∞,
            –ø–æ—Ç–æ–º—É —á—Ç–æ —á–∞—Ç–æ–≤ –Ω–µ –±—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ.
        </p>
        <p class="mb-8">
            <a
                href="https://buy.stripe.com/fZudRa5RFbzybFy3Gnes000"
                class="bg-primary text-sm text-white py-3 px-4 rounded-lg hover:bg-red-700 dark:bg-dark-primary dark:hover:bg-red-500 transition-colors mb-8"
            >
                <nobr>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª—É–±—É –∑–∞ ‚Ç¨69/–º–µ—Å—è—Ü üç∑</nobr>
            </a>
        </p>
        <p>
            <button
                id="book-tasting-btn"
                class="bg-primary text-white text-sm py-3 px-4 rounded-lg hover:bg-red-700 dark:bg-dark-primary dark:hover:bg-red-500 transition-colors"
            >
                <nobr>–°—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–¥–Ω—É –≤—Å—Ç—Ä–µ—á—É –∑–∞ ‚Ç¨25 üç∑</nobr>
            </button>
        </p>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const bookButton = document.getElementById('book-tasting-btn') as HTMLButtonElement;

    // Handle booking
    bookButton.addEventListener('click', async () => {
        bookButton.disabled = true;
        bookButton.textContent = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';

        try {
            const response = await fetch('/api/create-checkout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            });

            const data = await response.json();

            if (data.url) {
                window.location.href = data.url;
            } else {
                throw new Error(data.error || 'Failed to create checkout session');
            }
        } catch (error) {
            console.error('Checkout error:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
            bookButton.disabled = false;
            bookButton.innerHTML = '<nobr>–°—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–¥–Ω—É –≤—Å—Ç—Ä–µ—á—É –∑–∞ ‚Ç¨25 üç∑</nobr>';
        }
    });
});
</script>
